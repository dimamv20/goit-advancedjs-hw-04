{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46669299-ebb68efeed7427af4171916f3';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst MAX_IMAGES = 45;\n\nexport const fetchImages = async (query, page = 1, perPage = 15) => {\n    const remainingImages = MAX_IMAGES - (page - 1) * perPage;\n    if (remainingImages <= 0) return { hits: [], totalHits: 0 };\n\n\n    perPage = Math.min(perPage, remainingImages);\n\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        return response.data; \n    } catch (error) {\n        throw new Error('Помилка завантаження зображень');\n    }\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nexport const renderImages = (images) => {\n    const listPhotos = document.querySelector('.list-photos');\n\n    const imageElements = images.map(image => `\n        <li>\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            </a>\n            <div>\n                <p>Likes: ${image.likes}</p>\n                <p>Views: ${image.views}</p>\n                <p>Comments: ${image.comments}</p>\n                <p>Downloads: ${image.downloads}</p>\n            </div>\n        </li>\n    `).join('');\n\n    listPhotos.insertAdjacentHTML('beforeend', imageElements);\n\n    const lightbox = new SimpleLightbox('.list-photos a');\n    lightbox.refresh();\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.getElementById('search-form');\nconst searchField = document.getElementById('search-field');\nconst loadMoreButton = document.getElementById('load-more');\nconst listPhotos = document.querySelector('.list-photos');\nconst loadingIndicator = document.createElement('div');\nloadingIndicator.textContent = 'Завантаження...';\nloadingIndicator.classList.add('loading-indicator');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nlet lightbox = new SimpleLightbox('.list-photos a'); \n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    \n    const query = searchField.value.trim();\n    if (!query) return;\n\n    currentPage = 1;\n    currentQuery = query;\n    listPhotos.innerHTML = '';\n    loadMoreButton.style.display = 'none';\n\n    await performSearch(query);\n    searchField.value = ''; \n});\n\nloadMoreButton.addEventListener('click', async () => {\n    currentPage += 1;\n    await performSearch(currentQuery);\n});\n\nasync function performSearch(query) {\n    document.body.appendChild(loadingIndicator);\n\n    try {\n        const response = await fetchImages(query, currentPage);\n        const images = response.hits;\n        totalHits = response.totalHits;\n\n        if (images.length === 0 && currentPage === 1) {\n            showNoResultsMessage();\n            return;\n        }\n\n        renderImages(images);\n        lightbox.refresh(); \n\n        const totalLoadedImages = document.querySelectorAll('.list-photos img').length;\n        if (totalLoadedImages >= totalHits || totalLoadedImages >= 45) { \n            loadMoreButton.style.display = 'none';\n            showEndOfResultsMessage();\n        } else {\n            loadMoreButton.style.display = 'block';\n        }\n\n\n        const cardHeight = document.querySelector('.list-photos li').getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n\n    } catch (error) {\n        console.error(error);\n    } finally {\n        loadingIndicator.remove();\n    }\n}\n\nfunction showEndOfResultsMessage() {\n    const message = document.createElement('p');\n    message.textContent = \"We're sorry, but you've reached the end of search results.\";\n    message.classList.add('end-of-results-message');\n    document.body.appendChild(message);\n}\n"],"names":["API_KEY","BASE_URL","MAX_IMAGES","fetchImages","query","page","perPage","remainingImages","url","axios","renderImages","images","listPhotos","imageElements","image","SimpleLightbox","searchForm","searchField","loadMoreButton","loadingIndicator","currentPage","currentQuery","totalHits","lightbox","event","performSearch","response","totalLoadedImages","showEndOfResultsMessage","cardHeight","error","message"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAa,GAENC,EAAc,MAAOC,EAAOC,EAAO,EAAGC,EAAU,KAAO,CAChE,MAAMC,EAAkBL,GAAcG,EAAO,GAAKC,EAClD,GAAIC,GAAmB,EAAG,MAAO,CAAE,KAAM,GAAI,UAAW,GAGxDD,EAAU,KAAK,IAAIA,EAASC,CAAe,EAE3C,MAAMC,EAAM,GAAGP,CAAQ,QAAQD,CAAO,MAAM,mBAAmBI,CAAK,CAAC,iEAAiEC,CAAI,aAAaC,CAAO,GAE9J,GAAI,CAEA,OADiB,MAAMG,EAAM,IAAID,CAAG,GACpB,IACnB,MAAe,CACZ,MAAM,IAAI,MAAM,gCAAgC,CACnD,CACL,EClBaE,EAAgBC,GAAW,CACpC,MAAMC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAgBF,EAAO,IAAIG,GAAS;AAAA;AAAA,uBAEvBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,4BAGtCA,EAAM,KAAK;AAAA,4BACXA,EAAM,KAAK;AAAA,+BACRA,EAAM,QAAQ;AAAA,gCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAG1C,EAAE,KAAK,EAAE,EAEVF,EAAW,mBAAmB,YAAaC,CAAa,EAEvC,IAAIE,EAAe,gBAAgB,EAC3C,QAAO,CACpB,EClBMC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAiB,SAAS,eAAe,WAAW,EACpDN,EAAa,SAAS,cAAc,cAAc,EAClDO,EAAmB,SAAS,cAAc,KAAK,EACrDA,EAAiB,YAAc,kBAC/BA,EAAiB,UAAU,IAAI,mBAAmB,EAElD,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EACZC,EAAW,IAAIR,EAAe,gBAAgB,EAElDC,EAAW,iBAAiB,SAAU,MAAOQ,GAAU,CACnDA,EAAM,eAAc,EAEpB,MAAMpB,EAAQa,EAAY,MAAM,KAAI,EAC/Bb,IAELgB,EAAc,EACdC,EAAejB,EACfQ,EAAW,UAAY,GACvBM,EAAe,MAAM,QAAU,OAE/B,MAAMO,EAAcrB,CAAK,EACzBa,EAAY,MAAQ,GACxB,CAAC,EAEDC,EAAe,iBAAiB,QAAS,SAAY,CACjDE,GAAe,EACf,MAAMK,EAAcJ,CAAY,CACpC,CAAC,EAED,eAAeI,EAAcrB,EAAO,CAChC,SAAS,KAAK,YAAYe,CAAgB,EAE1C,GAAI,CACA,MAAMO,EAAW,MAAMvB,EAAYC,EAAOgB,CAAW,EAC/CT,EAASe,EAAS,KAGxB,GAFAJ,EAAYI,EAAS,UAEjBf,EAAO,SAAW,GAAKS,IAAgB,EAAG,CAC1C,uBACA,MACH,CAEDV,EAAaC,CAAM,EACnBY,EAAS,QAAO,EAEhB,MAAMI,EAAoB,SAAS,iBAAiB,kBAAkB,EAAE,OACpEA,GAAqBL,GAAaK,GAAqB,IACvDT,EAAe,MAAM,QAAU,OAC/BU,KAEAV,EAAe,MAAM,QAAU,QAInC,MAAMW,EAAa,SAAS,cAAc,iBAAiB,EAAE,sBAAuB,EAAC,OACrF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAS,CAEJ,OAAQC,EAAO,CACZ,QAAQ,MAAMA,CAAK,CAC3B,QAAc,CACNX,EAAiB,OAAM,CAC1B,CACL,CAEA,SAASS,GAA0B,CAC/B,MAAMG,EAAU,SAAS,cAAc,GAAG,EAC1CA,EAAQ,YAAc,6DACtBA,EAAQ,UAAU,IAAI,wBAAwB,EAC9C,SAAS,KAAK,YAAYA,CAAO,CACrC"}