{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46669299-ebb68efeed7427af4171916f3';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page = 1, perPage = 15) => {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        return response.data; \n    } catch (error) {\n        throw new Error('Помилка завантаження зображень');\n    }\n};\n","import iziToast from 'izitoast';\n\nexport const renderImages = (images) => {\n    const listPhotos = document.querySelector('.list-photos');\n\n    const imageElements = images.map(image => `\n        <li>\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            </a>\n            <div>\n                <p>Likes: ${image.likes}</p>\n                <p>Views: ${image.views}</p>\n                <p>Comments: ${image.comments}</p>\n                <p>Downloads: ${image.downloads}</p>\n            </div>\n        </li>\n    `).join('');\n\n    listPhotos.insertAdjacentHTML('beforeend', imageElements);\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.getElementById('search-form');\nconst searchField = document.getElementById('search-field');\nconst loadMoreButton = document.getElementById('load-more');\nconst listPhotos = document.querySelector('.list-photos');\nconst loadingIndicator = document.createElement('div');\nloadingIndicator.textContent = 'Завантаження...';\nloadingIndicator.classList.add('loading-indicator');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nconst perPage = 15;\nlet lightbox = new SimpleLightbox('.list-photos a');\n\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    \n    const query = searchField.value.trim();\n    if (!query) return;\n\n    currentPage = 1;\n    currentQuery = query;\n    listPhotos.innerHTML = '';\n    loadMoreButton.style.display = 'none';\n    removeEndOfResultsMessage();\n\n    await performSearch(query);\n    searchField.value = ''; \n});\n\n\nloadMoreButton.addEventListener('click', async () => {\n    currentPage += 1;\n    await performSearch(currentQuery);\n});\n\nasync function performSearch(query) {\n    document.body.appendChild(loadingIndicator);\n\n    try {\n        const response = await fetchImages(query, currentPage, perPage);\n        const images = response.hits;\n        totalHits = response.totalHits;\n\n        if (images.length === 0 && currentPage === 1) {\n            showNoResultsMessage();\n            return;\n        }\n\n        renderImages(images);\n        lightbox.refresh(); \n\n        const totalLoadedImages = document.querySelectorAll('.list-photos img').length;\n        \n\n        if (totalLoadedImages >= totalHits) {\n            loadMoreButton.style.display = 'none';\n            showEndOfResultsMessage();\n        } else {\n            loadMoreButton.style.display = 'block';\n        }\n\n\n        if (currentPage > 1) {\n            const cardHeight = document.querySelector('.list-photos li').getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n    } catch (error) {\n        console.error(error);\n    } finally {\n        loadingIndicator.remove();\n    }\n}\n\n\nfunction showEndOfResultsMessage() {\n    if (!document.querySelector('.end-of-results-message')) {\n        const message = document.createElement('p');\n        message.textContent = \"We're sorry, but you've reached the end of search results.\";\n        message.classList.add('end-of-results-message');\n        document.body.appendChild(message);\n    }\n}\n\n\nfunction removeEndOfResultsMessage() {\n    const message = document.querySelector('.end-of-results-message');\n    if (message) message.remove();\n}\n\n\nfunction showNoResultsMessage() {\n    iziToast.info({ title: 'No results', message: 'No images found for your search query.' });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","renderImages","images","listPhotos","imageElements","image","searchForm","searchField","loadMoreButton","loadingIndicator","currentPage","currentQuery","totalHits","lightbox","SimpleLightbox","event","removeEndOfResultsMessage","performSearch","response","showNoResultsMessage","showEndOfResultsMessage","cardHeight","error","message"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAc,MAAOC,EAAOC,EAAO,EAAGC,EAAU,KAAO,CAChE,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAK,CAAC,iEAAiEC,CAAI,aAAaC,CAAO,GAE9J,GAAI,CAEA,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACnB,MAAe,CACZ,MAAM,IAAI,MAAM,gCAAgC,CACnD,CACL,ECZaE,EAAgBC,GAAW,CACpC,MAAMC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAgBF,EAAO,IAAIG,GAAS;AAAA;AAAA,uBAEvBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,4BAGtCA,EAAM,KAAK;AAAA,4BACXA,EAAM,KAAK;AAAA,+BACRA,EAAM,QAAQ;AAAA,gCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAG1C,EAAE,KAAK,EAAE,EAEVF,EAAW,mBAAmB,YAAaC,CAAa,CAC5D,ECdME,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAiB,SAAS,eAAe,WAAW,EACpDL,EAAa,SAAS,cAAc,cAAc,EAClDM,EAAmB,SAAS,cAAc,KAAK,EACrDA,EAAiB,YAAc,kBAC/BA,EAAiB,UAAU,IAAI,mBAAmB,EAElD,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAChB,MAAMd,EAAU,GAChB,IAAIe,EAAW,IAAIC,EAAe,gBAAgB,EAGlDR,EAAW,iBAAiB,SAAU,MAAOS,GAAU,CACnDA,EAAM,eAAc,EAEpB,MAAMnB,EAAQW,EAAY,MAAM,KAAI,EAC/BX,IAELc,EAAc,EACdC,EAAef,EACfO,EAAW,UAAY,GACvBK,EAAe,MAAM,QAAU,OAC/BQ,IAEA,MAAMC,EAAcrB,CAAK,EACzBW,EAAY,MAAQ,GACxB,CAAC,EAGDC,EAAe,iBAAiB,QAAS,SAAY,CACjDE,GAAe,EACf,MAAMO,EAAcN,CAAY,CACpC,CAAC,EAED,eAAeM,EAAcrB,EAAO,CAChC,SAAS,KAAK,YAAYa,CAAgB,EAE1C,GAAI,CACA,MAAMS,EAAW,MAAMvB,EAAYC,EAAOc,EAAaZ,CAAO,EACxDI,EAASgB,EAAS,KAGxB,GAFAN,EAAYM,EAAS,UAEjBhB,EAAO,SAAW,GAAKQ,IAAgB,EAAG,CAC1CS,IACA,MACH,CAgBD,GAdAlB,EAAaC,CAAM,EACnBW,EAAS,QAAO,EAEU,SAAS,iBAAiB,kBAAkB,EAAE,QAG/CD,GACrBJ,EAAe,MAAM,QAAU,OAC/BY,KAEAZ,EAAe,MAAM,QAAU,QAI/BE,EAAc,EAAG,CACjB,MAAMW,EAAa,SAAS,cAAc,iBAAiB,EAAE,sBAAuB,EAAC,OACrF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAC1B,CAAa,CACJ,CACJ,OAAQC,EAAO,CACZ,QAAQ,MAAMA,CAAK,CAC3B,QAAc,CACNb,EAAiB,OAAM,CAC1B,CACL,CAGA,SAASW,GAA0B,CAC/B,GAAI,CAAC,SAAS,cAAc,yBAAyB,EAAG,CACpD,MAAMG,EAAU,SAAS,cAAc,GAAG,EAC1CA,EAAQ,YAAc,6DACtBA,EAAQ,UAAU,IAAI,wBAAwB,EAC9C,SAAS,KAAK,YAAYA,CAAO,CACpC,CACL,CAGA,SAASP,GAA4B,CACjC,MAAMO,EAAU,SAAS,cAAc,yBAAyB,EAC5DA,GAASA,EAAQ,QACzB,CAGA,SAASJ,GAAuB,CAC5B,SAAS,KAAK,CAAE,MAAO,aAAc,QAAS,wCAAwC,CAAE,CAC5F"}